---
title: 计划作业
description: 使用作业计划来管理任务。
ms.topic: how-to
ms.date: 02/20/2020
ms.custom: seodec18
ms.openlocfilehash: c75f635a937dcddd2c1c02cc717f96f1441efe81
ms.sourcegitcommit: 6fd8dbeee587fd7633571dfea46424f3c7e65169
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/21/2020
ms.locfileid: "83726632"
---
# <a name="schedule-jobs-for-efficiency"></a>计划作业以提高效率

计划 Batch 作业可以指定你要最先运行的作业的优先级，同时还可以考虑到依赖于其他任务的任务。 计划作业可以确保使用最少量的资源。 可以关闭不再需要的节点，可以适时运行依赖于其他任务的任务来优化工作流。 每次只会运行一个作业。 在前一个作业完成之前，不会启动新的作业。 可将作业设置为自动完成。 

## <a name="benefit-of-job-scheduling"></a>作业计划的优势

计划作业的优势是可以指定作业创建计划。使用作业管理器任务计划的任务会与某个作业相关联。 作业管理器任务将为作业创建任务。 为此，作业管理器任务需要使用 Batch 帐户进行身份验证。 使用 AZ_BATCH_AUTHENTICATION_TOKEN 访问令牌。 使用该令牌可以访问作业的其他部分。 

## <a name="use-the-portal-to-schedule-a-job"></a>使用门户来计划作业

   1. 登录到 [Azure 门户](https://portal.azure.com/)。

   2. 选择要在其中计划作业的 Batch 帐户。

   3. 选择“添加”以创建新的作业计划，并填写“基本窗体”。  



![计划作业][1]

**作业计划 ID**：此作业计划的唯一标识符。

**显示名称**：作业的显示名称不需独一无二，但最大长度必须是 1024 个字符。

**不要在以下时间之前运行**：指定运行作业的最早时间。 如果未设置此字段，则表明计划已准备好立即运行作业。

**不要在以下时间之后运行**：在此处设置的时间之后不会运行任何作业。 如果未指定时间，则会创建一个重复作业计划，在显式终止该计划之前，它会一直保持有效状态。

**重复间隔**：可以指定作业的间隔时间。 一次只能计划一个作业，因此，如果到了在作业计划下创建新作业的时间，但上一个作业仍在运行，则在上一个作业完成之前，Batch 服务不会创建新作业。  

**开始时段**：在此处指定时间间隔，从计划指示应创建作业的时间开始，到应该完成该作业的时间为止。 如果当前作业在其指定时段内未完成，则下一个作业不会启动。

在“基本窗体”的底部，指定要在其中运行该作业的池。 若要查找池 ID 信息，请选择“更新”。  

![指定池][2]


**池 ID**：标识要在其中运行作业的池。

**作业配置任务**：选择“更新”，以便为作业管理器任务以及作业准备和释放任务（如果使用这些任务）命名。 

**优先级**：为作业指定优先级。

**最大时钟时间**：设置作业可运行的最长时间。 如果作业未在该期限内完成，Batch 会终止该作业。 如果未设置此字段，则作业没有时间限制。

**最大任务重试计数**：指定可以重试任务的次数，不超过四次。 此值不同于可以重试 API 调用的次数。

**所有任务完成时**：默认值为“无操作”。

**任务失败时**：默认值为“无操作”。 如果已用完重试次数或者启动任务时出错，则任务会失败。 

选择“保存”后，如果在左侧导航栏中转到“作业计划”，则可通过选择“执行信息”来跟踪作业的执行情况。   


## <a name="for-more-information"></a>更多信息

若要使用 Azure CLI 来管理作业，请参阅 [az batch job-schedule](https://docs.microsoft.com/cli/azure/batch/job-schedule?view=azure-cli-latest)。

## <a name="next-steps"></a>后续步骤

[创建任务依赖关系以运行依赖于其他任务的任务](batch-task-dependencies.md)。





[1]: ./media/batch-job-schedule/add_job_schedule-02.png
[2]: ./media/batch-job-schedule/add_job_schedule-03.png


