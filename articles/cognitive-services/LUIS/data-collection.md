---
title: 数据收集
description: 了解在开发应用程序时要收集的数据示例
ms.topic: conceptual
ms.date: 05/06/2020
ms.openlocfilehash: 7abb3736eb9d7c73465ffa646b79e8e7dd7ae88b
ms.sourcegitcommit: bb0afd0df5563cc53f76a642fd8fc709e366568b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/19/2020
ms.locfileid: "83599454"
---
# <a name="data-collection-for-your-app"></a>应用的数据收集

语言理解（LUIS）应用程序需要在应用程序开发过程中使用数据。

## <a name="data-used-in-luis"></a>LUIS 中使用的数据

LUIS 使用文本作为数据来定型和测试 LUIS 应用，[以进行分类并提取](luis-concept-intent.md)[实体](luis-concept-entity-types.md)。 你需要一个足够大的数据集，以便为定型和测试创建单独的数据集，这些数据集具有如下所示的多样性和分布。  其中每个集合中的数据不应重叠。

## <a name="training-data-selection-for-example-utterances"></a>训练数据选择（例如最谈话）

根据以下条件为定型集选择最谈话：

* **实际数据最好**：
    * **客户端应用程序中的真实数据**：选择最谈话，它们是客户端应用程序中的真实数据。  如果客户立即发送一种 web 窗体，并且你正在构建 bot，则可以通过使用 web 窗体数据来开始。
    * **面向源的数据**：如果没有任何现有数据，请考虑使用最谈话。  尝试从您的实际用户填充中进行大规模的最谈话，以获得您的应用程序的真实数据的最佳近似值。 与计算机生成的最谈话相比，有最谈话的人为。  当你生成在特定模式上生成的综合最谈话数据集时，它将会与创建最谈话的用户看到的很大程度上变得非常简单，并且在生产环境中不会正常运行。
* **数据多样性**：
    * **区域多样性**：确保每个意向的数据尽可能不同，包括_短语_（单词选择）和_语法_。  如果你正在教授有关休假日期的 HR 政策，请确保你有最谈话，它代表了你所提供的所有地区的使用条款。  例如，在欧洲，人们可能会询问 `taking a holiday` ，美国的人员可能会询问 `taking vacation days` 。
    * **语言多样性**：如果用户具有使用其他语言进行通信的各种本机语言，请确保具有代表非本机发言人的最谈话。
    * **输入多样性**：请考虑你的数据输入路径。 如果要从一个人员、部门或输入设备（麦克风）收集数据，则可能会丢失多样性，这对应用程序而言很重要，可以了解所有输入路径。
    * **标点多样性**：请考虑人们在文本应用程序中使用不同级别的标点，并确保使用标点的多样性。 如果你使用的是来自语音的数据，则不会有任何标点，因此你的数据不应这样做。
* **数据分发**：请确保跨意向的数据分散表示客户端应用程序接收的数据的相同分散。 如果你的 LUIS 应用程序将对请求计划休假（50%）的最谈话进行分类，但它还会看到最谈话，指出休假剩余天数（20%），批准叶子（20%）但某些功能 chit （10%）然后，数据集应具有每种类型的查询文本的示例百分比。
* **使用所有数据窗体**：如果 LUIS 应用程序将以多种形式使用数据，请确保在定型最谈话中包含这些窗体。 例如，如果客户端应用程序同时使用语音和键入的文本输入，则需要生成语音到文本的最谈话和类型化的最谈话。  用户在语音识别和打字错误中的类型以及不同错误的显示方式中将会出现不同的变化。  所有此变化形式都应在定型数据中表示。
* **正和负示例**：若要教授 LUIS 应用，必须了解意向是什么（正值）以及它不是什么（负值）。 在 LUIS 中，对于单个意向，最谈话只能为正值。 将查询文本添加到目的时，LUIS 会自动将该示例查询文本为所有其他意图的负示例。
* **应用程序范围之外的数据**：如果你的应用程序将看到超出你定义的意图的最谈话，请确保提供这些内容。 未分配给特定定义意向的示例将标记为 "**无**"。  请注意，有**无**意义的实际示例，以正确预测超出定义意向范围的最谈话。

    例如，如果您要创建一个侧重于休假时间的 HR 机器人，则有三个意向：
    * 计划或编辑休假
    * 查询可用休假日期
    * 批准/否决离开

    你需要确保具有涵盖这两种方法的最谈话，但也涵盖了应用程序应服务的范围之外的潜在最谈话：
    * `What are my medical benefits?`
    * `Who is my HR rep?`
    * `tell me a joke`
* **极少数示例**：您的应用程序需要很少的示例以及常见的示例。  如果你的应用程序从未见过很少的示例，它将无法在生产环境中识别它们。 如果你使用的是真实数据，将能够更准确地预测你的 LUIS 应用在生产中的工作方式。

### <a name="quality-instead-of-quantity"></a>质量而不是数量

在添加更多数据之前，请考虑现有数据的质量。  使用 LUIS 时，您使用的是机器教学。  你定义的标签和机器学习功能的组合是 LUIS 应用使用的内容。  它不只是依靠标签数量来做出最佳预测。  在生产环境中，您的 LUIS 应用程序的一些示例及其表示形式是最重要的部分。

### <a name="preprocessing-data"></a>预处理数据

以下预处理步骤有助于生成更好的 LUIS 应用：

* **删除重复项**：重复的最谈话不会有任何影响，但也不会有帮助，因此删除它们将节省标记时间。
* **应用相同的客户端-应用预处理**：如果客户端应用程序调用 LUIS 预测终结点，则在将文本发送到 LUIS 之前，将在运行时应用数据处理，你应以相同的方式对处理的数据定型 LUIS 应用。 例如，如果客户端应用程序使用[必应拼写检查](../bing-spell-check/overview.md)来更正 LUIS 输入的拼写，请在添加到 LUIS 之前更正定型和测试最谈话。
* **不要应用客户端应用程序不使用的新清理进程**：如果客户端应用程序直接接受语音生成的文本，而不使用任何清理，如语法或标点，则最谈话需要反映所有缺少的标点以及需要考虑的任何其他 misrecognition。
* **请勿清除数据**：不要消除可能会出现语音识别错误、意外 keypresses 或错误拼写/错误文本的格式不正确的输入。 如果你的应用程序会看到这样的输入，则对其进行定型和测试非常重要。 如果你不希望你的应用程序了解它，可以添加_格式不正确的输入_方法。 标记此数据以帮助 LUIS 应用在运行时预测正确的响应。 你的客户端应用程序可以选择适当的响应来识别最谈话，例如 `Please try again` 。

### <a name="labeling-data"></a>标记数据

* **将文本标记为正确**：示例最谈话应具有标记的实体的所有窗体。 这包括拼写错误的文本、错误输入和 mistranslated。

### <a name="data-review-after-luis-app-is-in-production"></a>LUIS 应用投入生产后的数据审阅

在将应用部署到生产环境后，[查看终结点最谈话](luis-concept-review-endpoint-utterances.md)以监视实际查询文本流量。  这样，你便可以利用真实数据更新定型最谈话，这将改善你的应用程序。 使用面向的或非真实的方案数据构建的任何应用都需要根据其真实用途进行改进。

## <a name="test-data-selection-for-batch-testing"></a>测试用于批测试的数据选择

以上针对定型最谈话列出的所有原则适用于你应该用于[测试集](luis-concept-batch-test.md)的最谈话。 确保跨意向和实体的分布尽可能地反映实际分布。

请勿在测试集内的定型集中重复使用最谈话。 这会错误地偏移你的结果，并且不会向你显示 LUIS 应用在生产环境中的执行情况。

发布应用的第一个版本后，应从真实流量中更新包含最谈话的测试集，以确保测试集反映生产分配，并可以监视一段时间内的实际性能。

## <a name="next-steps"></a>后续步骤

> [!div class="nextstepaction"]
> [了解 LUIS 在预测之前如何更改数据](luis-concept-data-alteration.md)
