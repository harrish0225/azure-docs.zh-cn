---
title: 如何：向自定义命令添加确认（预览版）
titleSuffix: Azure Cognitive Services
description: 本文介绍如何在自定义命令中实现命令的确认。
services: cognitive-services
author: encorona-ms
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 12/05/2019
ms.author: encorona
ms.openlocfilehash: bf1b79c1b5d7b9dfd93b354c6b6ff5a512bb74a5
ms.sourcegitcommit: c535228f0b77eb7592697556b23c4e436ec29f96
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2020
ms.locfileid: "82858239"
---
# <a name="how-to-add-a-confirmation-to-a-custom-command-preview"></a>如何：向自定义命令添加确认（预览版）

在本文中，你将学习如何向命令添加确认。

## <a name="prerequisites"></a>必备条件

你必须已完成以下文章中的步骤：
> [!div class="checklist"]
> *  [快速入门：创建自定义命令（预览）](./quickstart-custom-speech-commands-create-new.md)
> * [快速入门：使用参数创建自定义命令（预览）](./quickstart-custom-speech-commands-create-parameters.md)

## <a name="create-a-setalarm-command"></a>创建 SetAlarm 命令

为了演示确认，让我们创建一个新的命令，让用户设置警报。

1. 在[Speech Studio](https://speech.microsoft.com/)中打开之前创建的自定义命令应用程序。
1. 创建新命令`SetAlarm`。
1. 使用以下配置添加`DateTime`一个名为的参数。

   | 设置                           | 建议的值                     |  说明                 |
   | --------------------------------- | -----------------------------------------------------| ------------|
   | 名称                              | DateTime                                | 参数的描述性名称                                |
   | 必选                          | checked                                 | 一个复选框，该复选框指示在完成命令之前是否需要此参数的值 |
   | 响应所需的参数   | 简单编辑器-> 什么时间？                              | 在未知情况下询问此参数值的提示 |
   | 类型                              | DateTime                                | 参数的类型，例如 Number、String、Date Time 或 Geography   |
   | 日期默认值                     | 如果当前缺少日期，请使用            | 用户未提供时要使用的变量的默认值。  |  
   | 时间默认值                     | 如果缺少时间，则使用 "日开始"     |  用户未提供时要使用的变量的默认值。|

1. 添加一些示例句子。
   
    ```
    set an alarm for {DateTime}
    set alarm {DateTime}
    alarm for {DateTime}
   ```

1. 添加完成规则以确认结果。

   | 设置    | 建议的值                               |说明                                     |
   | ---------- | ------------------------------------------------------- |-----|
   | 规则名称  | 设置警报                                               |    描述规则用途的名称 |
   | 操作    | 发送语音响应-正常，为 {DateTime} 设置警报    |规则条件为 true 时要执行的操作

## <a name="try-it-out"></a>试试看

1. 选择`Train`位于右窗格顶部的图标。

1. 训练完成后，请`Test`选择。
    - 输入：为明天中午设置警报
    - 输出：正常，为 2020-05-02 12:00:00 设置的警报
    - 输入：设置警报
    - 输出：什么时间？
    - 输入：下午
    - 输出：正常，为 2020-05-01 17:00:00 设置的警报

## <a name="add-the-advanced-rules-for-confirmation"></a>添加用于确认的高级规则

通过添加交互规则来实现确认。

1. `SetAlarm`在现有命令中，在中间窗格中添加 " `+Add`通过选择**交互规则**" 图标，然后选择 "**交互规则** -> " "**确认" 命令**。

    此规则将要求用户确认警报的日期和时间，并在下一轮时间要求确认（是/否）。

   | 设置               | 建议的值                                                                  | 说明                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 规则名称             | 确认日期时间                                                                | 描述规则用途的名称          |
   | 条件            | 必需参数-> 日期时间                                                    | 确定何时可以运行规则的条件    |   
   | 操作               | 发送语音响应-> 是否确实要为 {DateTime} 设置警报？     | 规则条件为 true 时要执行的操作 |
   | 一致          | 需要用户确认                                                 | 预期下一轮                      |
   | 执行后状态  | 等待用户输入                                                            | 转换后用户的状态                  |
  
      > [!div class="mx-imgBorder"]
      > ![创建所需的参数响应](media/custom-speech-commands/add-validation-set-temperature.png)

1. 添加另一个交互规则以处理成功的确认（用户说 "是"）

   | 设置               | 建议的值                                                                  | 说明                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 规则名称             | 接受的确认                                                            | 描述规则用途的名称          |
   | 条件            | 确认 & 必需参数 > 日期时间已成功                      | 确定何时可以运行规则的条件    |   
   | 执行后状态 | 执行完成规则                                                          | 转换后的用户状态                   |

1. 添加高级规则以处理已拒绝的确认（用户未说）

   | 设置               | 建议的值                                                                  | 说明                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 规则名称             | 拒绝的确认                                                                   | 描述规则用途的名称          |
   | 条件            | 已拒绝确认 & 必需参数-> DateTime                               | 确定何时可以运行规则的条件    |   
   | 操作               | 清除参数值-> 日期时间 & 发送语音响应 > 没有问题，该时间是多少？  | 规则条件为 true 时要执行的操作 |
   | 执行后的状态 | 等待输入                                                                   | 转换后的用户状态                   |
   | 一致          | 应输入来自用户 > 日期时间的参数                           | 预期下一轮                      |

## <a name="try-out-the-changes"></a>尝试更改

选择`Train`，等待训练完成，并选择`Test`。

- 输入：为明天中午设置警报
- 输出：是否确实要为 2020-05-02 12:00:00 设置警报？
- 输入：否
- 输出：没问题，那次什么时间？
- 输入：下午
- 输出： "是否确实要为 2020-05-01 17:00:00 设置警报？"
- 输入：是
- 输出：正常，为 2020-05-01 17:00:00 设置的警报

## <a name="next-steps"></a>后续步骤

> [!div class="nextstepaction"]
> [如何：向自定义命令添加单步更正（预览）](./how-to-custom-speech-commands-one-step-correction.md)